{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "CL",
  "patterns": [
    { "include": "#constants" },
    { "include": "#comments" },
    { "include": "#keywords" },
    { "include": "#strings" },
    { "include": "#meta" },
    { "include": "#vars" },
    { "include": "#punctuation" },
    { "include": "#storage" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-dash.cl",
          "begin": "--",
          "end": "\n"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "match": "(?<![\\w\\d.])0[xX][0-9A-Fa-f]+(?![pPeE.0-9])",
          "name": "constant.numeric.integer.hexadecimal.cl"
        },
        {
          "match": "(?<![\\w\\d.])0[xX][0-9A-Fa-f]+(\\.[0-9A-Fa-f]+)?([eE]-?\\d*)?([pP][-+]\\d+)?",
          "name": "constant.numeric.float.hexadecimal.cl"
        },
        {
            "match": "(?<![\\w\\d])\\d+\\b",
            "name": "constant.numeric.integer.cl"
          },
        {
          "name": "constant.language.cl",
          "match": "(?i)\\b(full|inhibit|enable|program|man|auto|cas|stop|start|open|close|run|on|off|reset|high|low|normal|reststrt|reset|in\\s|out)\\b"
        },
        {
          "name": "constant.time.cl",
          "match": "(?i)\\b(hour|second|minute|hours|mins|secs)\\b"
        },
        {
          "match": "^[A-Z0-9]{1,3}:",
          "name": "entity.name.label.cl"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.conditional.cl",
          "match": "(?i)\\b(if|while|for|then|else|when)\\b"
        },
        {
          "name": "keyword.control.assignment.cl",
          "match": "(?i)\\b(set|write|from|at)\\b"
        },
        {
          "name": "keyword.control.cl",
          "match": "(?i)\\b(wait|send|goto|loop|repeat|pause|resume|exit)\\b"
        },
        {
          "name": "keyword.other.cl",
          "match": "(?i)\\b(enb|keepenb|alarm)\\b"
        },
        {
          "match": "(?i)\\b(and|or|not|xor|not\\s|(?<!\\.)\\.{2})\\b",
          "name": "keyword.operator.logical.cl"
        },
        {
          "match": "(?i)(\\+|\\-|\\*|\\/|\\=|(<>)|(>=)|(<=)|\\<|\\>|(b\\mod\\b))",
          "name": "keyword.operator.arithmetic.cl"
        },
        {
          "name": "keyword.other.cl",
          "match": "(?i)\\b(badval|parameter|value|eu|access|engineer|exists|class|backgrnd|abnormal)\\b"
        }
      ]
    },
    "strings": {
      "name": "string.quoted.double.cl",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.cl",
          "match": "\\\\."
        }
      ]
    },

    "vars": {
      "patterns": [
        {
          "begin": "\\b([UMJVOWYGSHDQARQ][A-Z0-9_]{2,12})\\.?([A-Z]{,12})\\b",
          "beginCaptures": {
            "1": {
              "name": "variable.other.io.cl"
            },
            "2": {
              "name": "variable.parameter.io.cl"
            }
          },
          "end": "(\\s|\\S|\\n)"
        },
        {
          "begin": "(?i)(\\$ntwrk\\d{2}|\\!box|\\$nm\\d{2}[bn]\\d{2})\\b\\.?(\\w{,12})",
          "beginCaptures": {
            "1": {
              "name": "variable.language.cl"
            },
            "2": {
              "name": "variable.parameter.cl"
            }
          },
          "end": "(\\s|\\S|\\n)"
        },
        {
          "begin": "\\b([\\d{2,3}][A-Z0-9_]{2,8})\\b\\.?(\\w{,8})?",
          "beginCaptures": {
            "1": {
              "name": "variable.language.cl"
            },
            "2": {
              "name": "variable.parameter.cl"
            }
          },
          "end": "(\\s|\\S|\\n)"
        }
      ]
    },

    "meta": {
      "patterns": [
        {
          "begin": "(?i)\\b(hold handler|block|restart|phase|step|ho?ld\\d{,2}|shutdown|shdn\\d{,2}|subroutine|call|end|sequence|point)\\b\\s?\\w*",
          "captures": {
            "0": {
              "name": "meta.entity.name.cl"
            },
            "1": {
              "name": "meta.entity.function.cl"
            }
          },

          "end": "(\\s|\\S|\\n)"
        },
        {
          "match": "(?i)\\b(error|round|int|abs|avg|sqrt|set_bad|sum|max|min|now|date|hour|second|date_time|allow_bad|bld_visible|equal_null_point_id|others|pv_alg)\\b",
          "name": "support.function.library.cl"
        }
      ]
    },

    "punctuation": {
      "patterns": [
        {
          "name": "punctuation.separator.continuation.cl",
          "match": "^\\&"
        }
      ]
    },
    "storage": {
      "patterns": [
        {
          "name": "entity.name.type.cl",
          "match": "(?i)\\b(logical|number|string|enum|time|array|amp|hpm)\\b"
        },
        {
          "name": "entity.name.type.modifier",
          "match": "(?i)\\b(local|external|general|generic)\\b"
        },
        {
          "name": "variable.parameter.cl",
          "match": "(?i)\\b(flg|nn|fl|(str\\d{2}))\\b"
        }
      ]
    }
  },
  "scopeName": "source.cl"
}
